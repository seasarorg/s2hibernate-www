<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- don't edit start -->
<head>
<title>Seasar - DI Container with AOP -</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="seasar_b.css" type="text/css" rel="stylesheet" media="screen" />
<link href="seasar_p.css" type="text/css" rel="stylesheet" media="print" />
<script src="seasar_b.js" type="text/JavaScript" language="JavaScript">
</script>
</head>
<body onload="preload('ja')">
<table width="100%" border="0" cellspacing="0" cellpadding="0" align="left">
<tr>
<td align="left" valign="top" width="780">
<table width="780" border="0" cellspacing="0" cellpadding="0" class="white">

<tr>
<td colspan="7"><img height="5" width="780" src="images/top01_b.gif" alt="" /></td>
</tr>
<tr>
<td><img height="117" width="235" src="images/top02_b.gif" alt="Seasar" /></td>
<td colspan="3"><img height="117" width="289" src="images/top03.gif" alt="DI Container with AOP" /></td>
<td colspan="3"><img height="117" width="256" src="images/spacer.gif" alt="" /></td>
</tr>
<tr>
<td rowspan="2"><img src="images/top04.gif" alt="" height="49" width="235" /></td>
<td><a href="http://www.seasar.org/index.html"><img src="images/menu01_b_ja.gif" height="30" width="78" border="0" alt="" id="menu01" onmouseover="swap(1)" onmouseout="restore(1)" name="menu01" /></a></td>
<td><a href="http://www.seasar.org/projects.html"><img src="images/menu02_b_ja.gif" height="30" width="101" border="0" alt="" id="menu02" onmouseover="swap(2)" onmouseout="restore(2)" name="menu02" /></a></td>
<td><a href="http://www.seasar.org/products.html"><img src="images/menu03_b_ja.gif" height="30" width="110" border="0" alt="" id="menu03" onmouseover="swap(3)" onmouseout="restore(3)" name="menu03" /></a></td>
<td><a href="http://www.seasar.org/resources.html"><img src="images/menu04_b_ja.gif" height="30" width="113" border="0" alt="" id="menu04" onmouseover="swap(4)" onmouseout="restore(4)" name="menu04" /></a></td>
<td><img src="images/menu05_b_ja.gif" height="30" width="109" border="0" alt="" id="menu05" onmouseover="swap(5)" onmouseout="restore(5)" name="menu05" /></td>
<td><img height="30" width="34" src="images/menu06.gif" alt="" /></td>
</tr>

<tr>
<td colspan="6"><img height="19" width="545" src="images/spacer.gif" alt="" /></td>
</tr>
</table>
<table width="780" border="0" cellspacing="0" cellpadding="0" class="white">
<tr align="left" valign="top">
<td width="14"><img height="14" width="14" src="images/spacer.gif" alt="" /></td>
<td width="740" class="main">
<!-- don't edit end -->
<!-- document start -->
<p>
    このドキュメントはS2Hibernate-JPAのバージョン1.0.0-rc1のものです。<br/>
</p>

<ul>	
<li><a href="#Overview">概要</a></li>
<li><a href="#Reference">リファレンス</a>
<ul>
<li><a href="#Setup">セットアップ</a></li>
<li><a href="#Usage">基本的な使い方</a>
<ul>
<li><a href="#Entity">エンティティ</a></li>
<li><a href="#dao">Dao(Data Access Object)</a></li>
<li><a href="#diconFile">diconファイル</a></li>
<li><a href="#persistence.xml">persistence.xml</a></li>
</ul>
</li>
<li><a href="#autoDetection">エンティティクラスとマッピングファイルの自動検出</a>
<ul>
<li><a href="#autoDetectionSettingsEnable">有効化のための設定</a></li>
<li><a href="#autoDetectionSettingsDisable">無効化のための設定</a></li>
<li><a href="#autoDetectionCompornents">コンポーネントの概要</a></li>
</ul>
</li>
<li><a href="#test">効率的なテストの実行方法</a><ul>
<li><a href="#env.txt">env.txt</a></li>
<li><a href="#testPersistence.xml">テスト用のpersistence.xml</a></li>
</ul>
</li>
<li><a href="#multiple">複数の永続ユニットの使い方</a></li>
</ul>
</li>
</ul>

<h2><a name="Overview">概要</a></h2>
<p>S2Hibernate-JPAは以下の特徴を持っています。</p>
<ul>
<li>Seasar2で管理されているJava Transaction API (JTA)やConnectionPoolと<a href="http://www.hibernate.org/">Hibernate3</a> + <a href="http://annotations.hibernate.org/">Hibernate Annotations</a> + <a href="http://entitymanager.hibernate.org/">Hibernate EntityManager</a>が簡単に連動するようになります。</li>
<li>アプリケーションサーバが無くても､簡単にEJB3のJava Persistence API (JPA)を利用ができます。</li>
<li><a href="http://s2container.seasar.org/ja/S2.4SmartDeploy.html">SMART deploy</a>の規約を利用することでエンティティクラスとマッピングファイルを自動検出できます。
</li>
<li>Hibernate EntityManagerを使ったテストの時間を短縮できます。 </li>
</ul>

<h2><a name="Reference">リファレンス</a></h2>
<h3><a name="Setup">セットアップ</a></h3>
<ul>
<li>プロジェクトのインポート<br/>
	JDK5以上が必要です。<br/>
	あらかじめ<a href="http://s2container.seasar.org/ja/">Seasar2とS2-Tiger</a>をダウンロードして、EclipseのJavaプロジェクトとしてワークスペースにインポートしてください。<br/>
	S2Hibernate-JPA-x.x.x.zipを解凍してできたs2hibernate-jpaディレクトリをEclipseのJavaプロジェクトとしてワークスペースにインポートしてください。<br/>
</li>
<li>必要なjarファイル<br/>
	S2Hibernate-JPAとして必要なjarファイルは、s2hibernate-jpa/libにそろってます。この他に<a href="http://s2container.seasar.org/ja/">Seasar2およびS2-Tiger</a>のjarファイルが必要です。<br/>
	Hibernate3はコネクションプールやキャッシュの実装をいろいろ選べるようになっているので、S2Hibernate-JPAで用意していない実装が必要な場合は、<a href="http://www.hibernate.org/">Hibernateのサイト</a>よりダウンロードしてください。<br/>
</li>
<li>クラスパス<br/>
	以下のファイルにクラスパスを通します。resourcesのファイル（特にconvention.diconとjdbc.dicon）はプロジェクトに適した設定に変更し使用してください。
	<ul>
	<li>s2hibernate-jpa/libのjarファイル</li>
	<li>s2hibernate-jpa/resources(jpa.dicon、META-INF/persistence.xml)</li>
	<li>Seasar2のresources(convention.dicon、creator.dicon、customizer.dicon、jdbc.dicon、log4.properties)</li>
	</li>
	</ul>
</li>
<li>データベース<br/>
	簡単に機能を試すことができるように、RDBMSであるHSQLDB(hsqldb.jar)がSeasar2に含まれています。
</li>
</ul>


<h3><a name="Usage">基本的な使い方</a></h3>
<p>
    S2Hibernate-JPAの機能を使用するにあたり、エンティティ、Dao(.java)、diconファイル、persistence.xmlの作成が必要になります。
</p>

<h4><a name="Entity">エンティティ</a></h4>
<p>Persistence APIの仕様に合わせてエンティティを作成します。 
</p>
<p>
SMART deployの規約に則ってエンティティクラスの自動検出を行うためにエンティティはエンティティパッケージに配置します。たとえば、convention.diconに設定するルートパッケージ名が「example」の場合、エンティティパッケージは「example.entity」となります。<br/>
SMART deployを使った自動検出の詳細は<a href="#autoDetection">エンティティクラスとマッピングファイルの自動検出</a>を参照してください。</p>

<h4><a name="dao">Dao(Data Access Object)</a></h4>
<p>Daoの実装方法</p>
<ul>
<li>EntityManager型のフィールドを定義します。
<pre>private EntityManager entityManager;</pre></li>
<li>コンストラクタあるいはプロパティ経由で実装オブジェクトを受け取るように記述します。
<pre>public void setEntityManager(EntityManager entityManager) { 
	this.entityManager = entityManager;
}</pre>
</li>
<li>各メソッドでEntityManagerに対する処理を記述します。
<pre>public Employee getEmployee(int empno) {
    return entityManager.find(Employee.class, 7788);
}</pre>
</li>
</ul>

<h4><a name="diconFile">diconファイル</a></h4>
<p>
    SMART deployに必要なconvention.dicon、creator.dicon、customizer.diconを設定します。設定方法は<a href="http://s2container.seasar.org/ja/S2.4SmartDeploy.html#DiconConfSample">diconファイルの設定例</a>を参照してください。
</p>
<p>
    jpa.diconを設定します（以下のjpa.diconはs2hibernate/resourceに含まれるものと同一です）。jpa.diconは任意のdiconファイルやテストクラスで<a href="http://s2container.seasar.org/ja/DIContainer.html#Include">インクルード</a>して利用します。
</p>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE components PUBLIC &quot;-//SEASAR//DTD S2Container 2.3//EN&quot; 
  &quot;http://www.seasar.org/dtd/components23.dtd&quot;&gt;
&lt;components&gt;
  &lt;include path=&quot;javaee5.dicon&quot;/&gt;

  <b>&lt;!-- SMART deploy を利用しない場合は以下をコメントアウトしてください --&gt;</b>
  &lt;include path=&quot;convention.dicon&quot;/&gt;
  &lt;component class=&quot;org.seasar.hibernate.jpa.impl.S2HibernateConfigurationImpl&quot;/&gt;
  &lt;component class=&quot;org.seasar.framework.jpa.autodetector.PersistenceClassAutoDetector&quot;/&gt;
  &lt;component class=&quot;org.seasar.framework.jpa.autodetector.MappingFileAutoDetector&quot;/&gt;
  <b>&lt;!-- ここまで SMART deploy 用の設定 --&gt;</b>

  &lt;component class=&quot;org.seasar.hibernate.jpa.impl.S2HibernatePersistenceUnitProvider&quot;/&gt;
  &lt;component class=&quot;org.seasar.hibernate.jpa.impl.S2HibernateDialect&quot;/&gt;
  &lt;component class=&quot;org.seasar.hibernate.jpa.metadata.HibernateEntityDescProvider&quot;/&gt;
  &lt;component class=&quot;org.seasar.hibernate.jpa.unit.HibernateEntityReaderProvider&quot;/&gt;

  &lt;component name=&quot;entityManagerFactory&quot; 
    class=&quot;javax.persistence.EntityManagerFactory&quot;&gt;
    jpa.persistenceUnitManager.getEntityManagerFactory(&quot;<b>persistenceUnit</b>&quot;)
  &lt;/component&gt;

  &lt;component name=&quot;entityManager&quot; 
    class=&quot;org.seasar.framework.jpa.impl.TxScopedEntityManagerProxy&quot;/&gt;

  &lt;!-- for test --&gt;
  <b>&lt;component name=&quot;dataSourceProxy&quot; 
    class=&quot;org.seasar.extension.datasource.impl.SingletonDataSourceProxy&quot;/&gt;</b>
&lt;/components&gt;</pre>
<p>
SMART deployを利用しない場合は設定の一部をコメントアウトしてください。
</p>
<p>
jpa.persistenceUnitManager.getEntityManagerFactory()に渡す永続ユニット名はpersistence.xmlの定義と一致させてください。
</p>
<p>
    コンポーネントdataSourceProxyはテスト用のコンポーネントです。
</p>

<h4><a name="persistence.xml">persistence.xml</a></h4>
<p>クラスパスの通っているディレクトリにMETA-INFディレクトリを作成します。META-INFには、次のようなpersistence.xmlを格納します。</p>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence&gt;
    &lt;persistence-unit name=&quot;<b>persistenceUnit</b>&quot; transaction-type=&quot;JTA&quot;&gt;
        &lt;jta-data-source><b>jdbc/DataSource</b>&lt;/jta-data-source&gt;
        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
        &lt;properties&gt;
            &lt;property name=&quot;hibernate.dialect&quot; 
                value=&quot;org.hibernate.dialect.HSQLDialect&quot;/&gt;
            &lt;property name=&quot;hibernate.jndi.class&quot; 
                value=&quot;org.seasar.extension.j2ee.JndiContextFactory&quot;/&gt;
            &lt;property name=&quot;hibernate.transaction.manager_lookup_class&quot; 
                value=&quot;org.seasar.hibernate.jpa.transaction.S2TransactionManagerLookup&quot;/&gt;
            &lt;property name=&quot;hibernate.show_sql&quot; 
                value=&quot;false&quot;/&gt;
            &lt;property name=&quot;hibernate.format_sql&quot; 
                value=&quot;true&quot;/&gt;
            &lt;property name=&quot;hibernate.use_sql_comments&quot; 
                value=&quot;false&quot;/&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre>
<p>
データソース名は、jdbc.diconの<var>名前空間名.DataSourceコンポーネント名</var>と一致させてください。
</p>
<p>
SMART deployによる自動検出ではなく、Hibernateに備わる自動検出機能を使用する場合、persistence.xmlとエンティティクラスはクラスパス上の同一のディレクトリまたはJarファイルに配置する必要があります。
</p>
<ul>
<li>classes (クラスパスに設定されるディレクトリ）
<ul>
<li>META-INF
<ul>
<li>persistence.xml</li>
</ul>
</li>
<li><var>エンティティクラス</var></li>
</ul>
</li>
</ul>


<h3><a name="autoDetection">エンティティクラスとマッピングファイルの自動検出</a></h3>
<p>
Hibernateにはエンティティクラスとマッピングファイルを自動検出する機能がありますが、以下のような制限があります。
</p>
<ul>
<li>通常は、クラスパス上のpersistence.xmlと同一のディレクトリまたはjarにあるエンティティクラスしか検出できない。特定のjarファイルからエンティティクラスを検出することもができるが、それにはpersistence.xmlのjar-file要素にjarファイルの指定が必要になる。</li>
<li>通常は、クラスパス上のpersistence.xmlと同一のディレクトリまたはjarにある標準のマッピングファイル（META-INF/orm.xml）とHibernate固有のマッピングファイル(hbm.xml)しか検出できない。特定のjarファイルからHibernate固有のマッピングファイル(hbm.xml)を検出することもできるが、それにはpersistence.xmlのjar-file要素にjarファイルの指定が必要になる。</li>
</ul>
<p>
S2Hibernate-JPAでは、エンティティクラスやマッピングファイルがpersistence.xmlと同一のディレクトリまたはjarに存在するかしないかに関係なく、クラスパス上にありさえすれば<a href="http://s2container.seasar.org/ja/S2.4SmartDeploy.html">SMART deploy</a>の規約に則ってそれらを自動検出します。
また、マッピングファイルについては標準のマッピングファイル（META-INF/orm.xml）以外のマッピングファイルも自動検出できます。
したがって、persistence.xmlのmapping-file要素、jar-file要素、class要素は特別な理由がない限り使用する必要がなくなります。
</p>


<h4><a name="autoDetectionSettingsEnable">有効化のための設定</a></h4>
<p>
自動検出を有効にするには次の設定が必要です。なお、<a href="#diconFile">上記のjpa.dicon</a>ではすでに自動検出に必要な設定がされています。</p>
<ul>
<li>SMART deploy</a>の設定(convention.dicon、creator.dicon、customizer.diconの設定など)</li>
<li>jpa.diconの設定(convention.diconのインクルードと以下のコンポーネントの定義)
<ul>
<li><code>org.seasar.framework.jpa.autodetector.PersistenceClassAutoDetector</code></li>
<li><code>org.seasar.framework.jpa.autodetector.MappingFileAutoDetector</code></li>
<li><code>org.seasar.hibernate.jpa.impl.S2HibernateConfigurationImpl</code></li>
</ul>
</li>
</ul>
<p>
    検出の重複を防ぐため、SMART deployの規約に則った自動検出とHibernateの自動検出の併用はできません。SMART deployの規約に則った自動検出を有効にした場合、Hibernateによる自動検出機能は無効になります。
</p>

<h4><a name="autoDetectionSettingsDisable">無効化のための設定</a></h4>
<p>
自動検出を無効にするには次の設定が必要です。
</p>
<ul>
<li>jpa.diconにて自動検出に必要な定義をコメントアウトする</li>
<li>jdbc.diconにてjdbc-extension.diconのインクルードをコメントアウトする</li>
</ul>

<h4><a name="autoDetectionCompornents">コンポーネントの概要</a></h4>
<p>
	自動検出に必要なコンポーネントの概要を説明します。
</p>
<p>
	説明の中で「エンティティパッケージ」という用語を使いますが、エンティティパッケージとはconvention.diconに指定したルートパッケージの直下の個別パッケージ名が「entity」であるパッケージのことです。
	たとえば、ルートパッケージ名が「example」の場合、エンティティパッケージは「example.entity」となります。
</p>
<dl>
<dt style="text-indent: 1em;"><b>org.seasar.framework.jpa.autodetector.PersistenceClassAutoDetector</b></dt>
<dd>
    エンティティパッケージ以下のエンティティクラスを自動検出します。</dd><dt style="text-indent: 1em"><b>org.seasar.framework.jpa.autodetector.MappingFileAutoDetector </b></dt>
<dd>
    META-INFディレクトリ以下とエンティティパッケージ以下のxxxOrm.xml(xxxは任意の値)という名称のマッピングファイルを自動検出します。ここでのマッピングファイルとはJPAのマッピングファイルです。Hibernate固有のマッピングファイル（hbm.xml）ではありません。</dd><dt style="text-indent: 1em"><b>org.seasar.hibernate.jpa.impl.S2HibernateConfigurationImpl</b></dt>
<dd>
    エンティティクラスやマッピングファイルに関する設定情報です。ここに指定されたエンティティクラスやマッピングファイルはEntityManagerFactoryの初期化前にHibernateの永続ユニットに登録されます。複数のPersistenceClassAutoDetectorとMappingFileAutoDetectorが<a href="http://s2container.seasar.org/ja/DIContainer.html#AutoBindingMode">自動バインディング</a>されます。自動バインディングされたPersistenceClassAutoDetectorとMappingFileAutoDetectorによって検出されたエンティティクラスやマッピングファイルはすべての永続ユニットに登録されます。特定の永続ユニットに対してのみ登録したい場合は、永続ユニットを指定してPersistenceClassAutoDetectorとMappingFileAutoDetectorを明示的にインジェクションしてください。<br/>
    このコンポーネントには特定のエンティティクラスとマッピングファイルを直接登録することもできます。</dd></dl>

<h3><a name="test">効率的なテストの実行方法</a></h3>
<p>
    Hibernate EntityManagerを利用したテストを実行すると、テストケース毎にEntitiyMnanagerFactoryが初期化されるためテストケースが多いと時間がかかります。これを避けるため、S2Hibernate-JPAではEntitiyMnanagerFactoryをキャッシュしテストケース間で共有する仕組みを提供します。
    このキャッシュを有効にするためにはenv.txtの設定とpersistence.xmlの設定が必要です。設定が正しく行われたかどうかはテストケース毎のログ出力から確認できます。</p>

<h4><a name="env.txt">env.txt</a></h4>
<p>
    env.txtファイルをクラスパス上に配置します。env.txtにはutから始まる任意の名称を記述してください。たとえば、「ut」や「ut-hoge」などです。
</p>

<h4><a name="testPersistence.xml">テスト用のpersistence.xml</a></h4>
<p>
    キャッシュされたEntitiyMnanagerFactoryからS2Containerに管理されたDataSourceやTransactionManagerに適切にアクセスできるようにテスト用のpersistence.xmlを使用します。</p>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence&gt;
    &lt;persistence-unit name=&quot;persistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;
        &lt;jta-data-source&gt;<b>dataSourceProxy</b>&lt;/jta-data-source&gt;
        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
        &lt;properties&gt;
            &lt;property name=&quot;hibernate.dialect&quot; 
                value=&quot;org.hibernate.dialect.HSQLDialect&quot;/&gt;
            &lt;property name=&quot;hibernate.jndi.class&quot; 
                value=&quot;org.seasar.extension.j2ee.JndiContextFactory&quot;/&gt;
            &lt;property name=&quot;hibernate.transaction.manager_lookup_class&quot; 
                value=&quot;<b>org.seasar.hibernate.jpa.transaction.S2TransactionManagerLookupTest</b>&quot;/&gt;
            &lt;property name=&quot;hibernate.show_sql&quot; 
                value=&quot;false&quot;/&gt;
            &lt;property name=&quot;hibernate.format_sql&quot; 
                value=&quot;true&quot;/&gt;
            &lt;property name=&quot;hibernate.use_sql_comments&quot; 
                value=&quot;false&quot;/&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre>
<p>
データソース名にはjpa.diconに定義された<code>org.seasar.extension.datasource.impl.SingletonDataSourceProxy</code>のコンポーネント名を指定してください。
</p>
<p>
hibernate.transaction.manager_lookup_classプロパティには<code>org.seasar.hibernate.jpa.transaction.S2TransactionManagerLookupTest</code>を指定してください。
</p>

<h3><a name="multiple">複数の永続ユニットの使い方</a></h3>
<p>
複数のJPA実装を使う場合や、複数のJDBC DataSourceを使う場合などは、それぞれにjpa.diconのコピーを用意します。
</p>

persistence.xmlを次のようにします。
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence&gt;
    &lt;persistence-unit name=&quot;<b>fooPersistenceUnit</b>&quot; transaction-type=&quot;JTA&quot;&gt;
        &lt;jta-data-source><b>jdbc/fooDataSource</b>&lt;/jta-data-source&gt;
    ．．．
    &lt;/persistence-unit&gt;
    &lt;persistence-unit name=&quot;<b>barPersistenceUnit</b>&quot; transaction-type=&quot;JTA&quot;&gt;
        &lt;jta-data-source><b>jdbc/barDataSource</b>&lt;/jta-data-source&gt;
    ．．．
    &lt;/persistence-unit&gt;
</pre>
foo-jpa.diconを次のようにします。
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE components PUBLIC &quot;-//SEASAR//DTD S2Container 2.3//EN&quot; 
    &quot;http://www.seasar.org/dtd/components23.dtd&quot;&gt;
&lt;components namespace=&quot;<b>fooJPA</b>&quot;&gt;
    &lt;include path=&quot;javaee5.dicon&quot;/&gt;

    &lt;component name=&quot;<b>fooEntityManagerFactory</b>&quot; class=&quot;javax.persistence.EntityManagerFactory&quot;&gt;
        jpa.persistenceUnitManager.getEntityManagerFactory(&quot;<b>fooPersistenceUnit</b>&quot;)
    &lt;/component&gt;

    &lt;component name=&quot;<b>fooEntityManager</b>&quot; 
        class=&quot;org.seasar.framework.jpa.TxScopedEntityManagerProxy&quot;/&gt;</pre>
<br/>
    bar-jpa.diconを次のようにします。
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE components PUBLIC &quot;-//SEASAR//DTD S2Container 2.3//EN&quot; 
    &quot;http://www.seasar.org/dtd/components23.dtd&quot;&gt;
&lt;components namespace=&quot;<b>barJPA</b>&quot;&gt;
    &lt;include path=&quot;javaee5.dicon&quot;/&gt;

    &lt;component name=&quot;<b>barEntityManagerFactory</b>&quot; class=&quot;javax.persistence.EntityManagerFactory&quot;&gt;
        jpa.persistenceUnitManager.getEntityManagerFactory(&quot;<b>barPersistenceUnit</b>&quot;)
    &lt;/component&gt;

    &lt;component name=&quot;<b>barEntityManager</b>&quot; 
        class=&quot;org.seasar.framework.jpa.TxScopedEntityManagerProxy&quot;/&gt;</pre>


<!-- document end -->
<!-- don't edit start --></td>
<td width="14"><img height="14" width="14" src="images/spacer.gif" alt="" /></td>
</tr>
<tr>
<td width="14"><img height="30" width="14" src="images/spacer.gif" alt="" /></td>
<td width="766"><img height="30" width="592" src="images/spacer.gif" alt="" /></td>
</tr>
<tr>
<td width="14"><img height="14" width="14" src="images/spacer.gif" alt="" /></td>
<td width="766" class="copyright">Copyright© 2004-2005, The Seasar Foundation and the others. All rights reserved.</td>
</tr>
</table>
</td>
<td class="backright" align="left" valign="top">&nbsp;</td>

</tr>
<tr>
<td class="backunder" align="left" valign="top" width="780" height="16">&nbsp;</td>
<td class="backcorner" align="left" valign="top" height="16">&nbsp;</td>
</tr>
</table>
<!-- don't edit end -->
</body>
</html>
